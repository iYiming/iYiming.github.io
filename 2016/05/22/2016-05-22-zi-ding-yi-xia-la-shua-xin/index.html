<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 仿写 RSS 阅读器 Unread 下拉刷新 · 一鸣的博客</title><meta name="description" content="仿写 RSS 阅读器 Unread 下拉刷新 - iYiming"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.jpg"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://iYiming.me/atom.xml" title="一鸣的博客"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.jpg"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/jiajiayouba" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/iYiming" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">仿写 RSS 阅读器 Unread 下拉刷新</h1><div class="post-info">2016年5月22日</div><div class="post-content"><blockquote>
<p>Swift 变化太快，原先敲的码已年久失修，重新整理之</p>
</blockquote>
<p>实现的效果如下：</p>
<p><img src="/images/custom_refresh_2/1.gif" alt="1"></p>
<h2 id="下拉刷新原理"><a href="#下拉刷新原理" class="headerlink" title="下拉刷新原理"></a>下拉刷新原理</h2><ul>
<li><code>UIScrollView</code> 的 <code>contentInset</code> 属性用于保持停留</li>
<li><code>UIScrollView</code> 的 <code>contentOffset</code> 属性获取偏移量。从而获取刷新状态，使用它我们就可以制定相应的自定义动画了。</li>
</ul>
<h2 id="怎样方便重用"><a href="#怎样方便重用" class="headerlink" title="怎样方便重用"></a>怎样方便重用</h2><p>如何获取偏移量？  </p>
<p>有两种方式可以获得:</p>
<ol>
<li><p>在含有 <code>UIScrollView</code>（及其子类）控制器里面使用<code>UIScrollViewDelegate</code>，从而获取偏移量。  </p>
</li>
<li><p>使用 KVO，通过监听 <code>contentOffset</code>，很容易的就得到了偏移量。</p>
</li>
</ol>
<p>但是如果要在多个控制器中使用下拉刷新，那么每个控制器都实现<code>UIScrollViewDelegate</code> 或 KVO，繁琐且臃肿。</p>
<p>滚动视图（<code>UIScrollView</code> 及其子类）和下拉刷新视图是一起的，有下拉刷新的地方就有滚动视图。把下拉刷新视图添加在滚动视图上（<code>UIScrollView</code>及其子类），得到刷新视图就可以获得滚动视图。因此把监听写在刷新视图里，就不用到处写了。</p>
<p>还有个问题，我们如何给滚动视图添加下拉刷新视图呢？有没有简单的方式给滚动视图添加下拉刷新视图。我们可以使用分类，添加一个下拉刷新视图属性，只要我们给这个下拉刷新视图赋值，我们就把它添加到滚动视图上。</p>
<h2 id="实现效果中的三个动画"><a href="#实现效果中的三个动画" class="headerlink" title="实现效果中的三个动画"></a>实现效果中的三个动画</h2><h4 id="0-展开、关闭动画"><a href="#0-展开、关闭动画" class="headerlink" title="0.展开、关闭动画"></a>0.展开、关闭动画</h4><p>原先是使用 POP 实现的，这次使用多次动画的方式。代码如下，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> 展开动画</div><div class="line"> </div><div class="line"> :param: animationLayer 动画Layer</div><div class="line"> */</div><div class="line">func spreadLayerAnimation(animationLayer: CALayer)&#123;</div><div class="line">    layerWidthAnimation(animationLayer, width: 100, animationTypeStr: &quot;Spread&quot;, animationIndexStr: &quot;1&quot;)</div><div class="line">&#125;</div><div class="line"></div><div class="line">/**</div><div class="line"> 关闭动画</div><div class="line"> </div><div class="line"> :param: animationLayer 关闭Layer</div><div class="line"> */</div><div class="line">func closeLayerAnimation(animationLayer: CALayer)&#123;</div><div class="line">    layerWidthAnimation(animationLayer, width: 0, animationTypeStr: &quot;Close&quot;, animationIndexStr: &quot;1&quot;)</div><div class="line">&#125;</div><div class="line"></div><div class="line">/**</div><div class="line"> 宽度动画</div><div class="line"> </div><div class="line"> :param: animationLayer    动画层</div><div class="line"> :param: width             宽度</div><div class="line"> :param: animationTypeStr  动画类型 展开 或 关闭</div><div class="line"> :param: animationIndexStr 动画索引</div><div class="line"> */</div><div class="line">func layerWidthAnimation(animationLayer: CALayer,width: CGFloat,animationTypeStr: String,animationIndexStr: String)&#123;</div><div class="line">    let screenWidth = CGRectGetWidth(UIScreen.mainScreen().bounds)</div><div class="line">    </div><div class="line">    let animation = CABasicAnimation(keyPath: &quot;bounds.size.width&quot;)</div><div class="line">    animation.duration = 0.13</div><div class="line">    animation.delegate = self</div><div class="line">    animation.toValue = NSNumber(float: 20)</div><div class="line">    animation.setValue(animationLayer, forKey: &quot;AnimationLayer&quot;)</div><div class="line">    animation.setValue(animationTypeStr, forKey: &quot;AnimationType&quot;)</div><div class="line">    animation.setValue(animationIndexStr, forKey: &quot;AnimationIndex&quot;)</div><div class="line">    animation.timingFunction = CAMediaTimingFunction(name: kCAMediaTimingFunctionEaseInEaseOut)</div><div class="line">    animationLayer.addAnimation(animation, forKey: &quot;animation&quot;)</div><div class="line">    animationLayer.frame = CGRect(x: (screenWidth - width)/2.0, y: animationLayer.frame.origin.y, width: CGFloat(width), height: animationLayer.frame.size.height)</div><div class="line">&#125;</div><div class="line"></div><div class="line">// 动画结束</div><div class="line">override func animationDidStop(anim: CAAnimation, finished flag: Bool) &#123;</div><div class="line">    let animationLayer = anim.valueForKey(&quot;AnimationLayer&quot;) as! CALayer</div><div class="line">    let animationTypeStr = anim.valueForKey(&quot;AnimationType&quot;) as! String</div><div class="line">    let animationIndexStr = anim.valueForKey(&quot;AnimationIndex&quot;) as! String</div><div class="line"></div><div class="line">    var width:CGFloat = 0</div><div class="line">    if animationIndexStr == &quot;1&quot;&#123;</div><div class="line">        if animationTypeStr == &quot;Spread&quot;&#123;</div><div class="line">            width = 20</div><div class="line">        &#125;else if animationTypeStr == &quot;Close&quot;&#123;</div><div class="line">            width = 20</div><div class="line">        &#125;</div><div class="line">    &#125;else if animationIndexStr == &quot;2&quot;&#123;</div><div class="line">        if animationTypeStr == &quot;Spread&quot;&#123;</div><div class="line">            width = 80</div><div class="line">        &#125;else if animationTypeStr == &quot;Close&quot;&#123;</div><div class="line">            width = 4</div><div class="line">        &#125;</div><div class="line">    &#125;else if animationIndexStr == &quot;3&quot;&#123;</div><div class="line">        if animationTypeStr == &quot;Spread&quot;&#123;</div><div class="line">            width = 40</div><div class="line">        &#125;else if animationTypeStr == &quot;Close&quot;&#123;</div><div class="line">            return</div><div class="line">        &#125;</div><div class="line">    &#125;else if animationIndexStr == &quot;4&quot;&#123;</div><div class="line">        if animationTypeStr == &quot;Spread&quot;&#123;</div><div class="line">            width = 60</div><div class="line">        &#125;</div><div class="line">    &#125;else&#123;</div><div class="line">        return</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    layerWidthAnimation(animationLayer, width: width, animationTypeStr: animationTypeStr, animationIndexStr:String(Int(animationIndexStr)! + 1))</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="1-旋转动画"><a href="#1-旋转动画" class="headerlink" title="1.旋转动画"></a>1.旋转动画</h4><p>其实就是沿着一定的路径进行旋转，使用 <code>CAKeyframeAnimation</code> 的 <code>path</code> 属性按照响应的贝塞尔曲线旋转。如下图：  </p>
<p><img src="/images/custom_refresh_2/2.gif" alt="2"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">// 设置界面</div><div class="line">func settingUI() &#123;</div><div class="line">    let screenWidth = CGRectGetWidth( UIScreen.mainScreen().bounds)</div><div class="line">    </div><div class="line">    layer1.backgroundColor = UIColor.redColor().CGColor</div><div class="line">    layer1.frame = CGRect(x: (screenWidth - 8)/2.0, y: 100, width: 8, height: 8)</div><div class="line">    layer1.cornerRadius = 4</div><div class="line">    view.layer.addSublayer(layer1)</div><div class="line">    </div><div class="line">    </div><div class="line">    layer2.backgroundColor = UIColor.redColor().CGColor</div><div class="line">    layer2.frame = CGRect(x: (screenWidth - 8)/2.0, y: 120, width: 8, height: 8)</div><div class="line">    layer2.cornerRadius = 4</div><div class="line">    view.layer.addSublayer(layer2)</div><div class="line">    </div><div class="line">    </div><div class="line">    layer3.backgroundColor = UIColor.redColor().CGColor</div><div class="line">    layer3.frame = CGRect(x: (screenWidth - 8)/2.0, y: 140, width: 8, height: 8)</div><div class="line">    layer3.cornerRadius = 4</div><div class="line">    view.layer.addSublayer(layer3)</div><div class="line">&#125;</div><div class="line"></div><div class="line">@IBAction func startAnimation(sender: AnyObject) &#123;</div><div class="line">    let screenWidth = CGRectGetWidth(UIScreen.mainScreen().bounds)</div><div class="line">    </div><div class="line">    let animation1 = CAKeyframeAnimation(keyPath: &quot;position&quot;)</div><div class="line">    animation1.delegate = self</div><div class="line">    animation1.duration = CFTimeInterval(0.3)</div><div class="line">    animation1.path = UIBezierPath(arcCenter: CGPoint(x:(screenWidth - 8)/2.0 + 4, y: 124.0),radius: CGFloat(58), startAngle:CGFloat(-M_PI_2), endAngle: CGFloat(0), clockwise: true).CGPath</div><div class="line">    animation1.timingFunction = CAMediaTimingFunction(name: kCAMediaTimingFunctionEaseInEaseOut)</div><div class="line">    layer1.addAnimation(animation1, forKey: &quot;rotationAnimation&quot;)</div><div class="line">    CATransaction.begin()</div><div class="line">    CATransaction.setDisableActions(true)</div><div class="line">    layer1.position = CGPoint(x: (screenWidth - 8)/2.0 + 58 + 4, y: 124)</div><div class="line">    CATransaction.commit()</div><div class="line">    </div><div class="line">    let animation3 = CAKeyframeAnimation(keyPath: &quot;position&quot;)</div><div class="line">    animation3.delegate = self</div><div class="line">    animation3.duration = CFTimeInterval(0.3)</div><div class="line">    animation3.path = UIBezierPath(arcCenter: CGPoint(x:(screenWidth - 8)/2.0 + 4, y: 124.0),radius: CGFloat(58), startAngle:CGFloat(M_PI_2), endAngle: CGFloat(M_PI), clockwise: true).CGPath</div><div class="line">    animation3.timingFunction = CAMediaTimingFunction(name: kCAMediaTimingFunctionEaseInEaseOut)</div><div class="line">    layer3.addAnimation(animation3, forKey: &quot;rotationAnimation&quot;)</div><div class="line">    CATransaction.begin()</div><div class="line">    CATransaction.setDisableActions(true)</div><div class="line">    layer3.position = CGPoint(x: (screenWidth - 8)/2.0 - 58 + 4, y: 124)</div><div class="line">    CATransaction.commit()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="2-按顺序放大、改变颜色动画"><a href="#2-按顺序放大、改变颜色动画" class="headerlink" title="2.按顺序放大、改变颜色动画"></a>2.按顺序放大、改变颜色动画</h4><p>有三个 Layer，第一个 Layer 动画（放大、改变颜色）结束后（使用 <code>animationDidStop</code>协议方法），开始第二个动画然后依次类推。如下图：</p>
<p><img src="/images/custom_refresh_2/3.gif" alt="3"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div></pre></td><td class="code"><pre><div class="line">var circleShapeLayer1 = CAShapeLayer()</div><div class="line">var circleShapeLayer2 = CAShapeLayer()</div><div class="line">var circleShapeLayer3 = CAShapeLayer()</div><div class="line"></div><div class="line">/**</div><div class="line"> 设置界面</div><div class="line"> */</div><div class="line">func settingUI() &#123;</div><div class="line">    let shapeWidth:CGFloat = 10</div><div class="line">    let bezierCGPath =  UIBezierPath(ovalInRect: CGRect(x: 0, y: 0, width: shapeWidth, height: shapeWidth)).CGPath</div><div class="line">    </div><div class="line">    let fillCGColor = UIColor(red: 200/255.0, green: 200/255.0, blue: 200/255.0, alpha: 1.0).CGColor</div><div class="line">    </div><div class="line">    let screenWidth = CGRectGetWidth(UIScreen.mainScreen().bounds)</div><div class="line">    let marginLeft = CGFloat((screenWidth - 70)/2.0)</div><div class="line">    </div><div class="line">    circleShapeLayer1.path = bezierCGPath</div><div class="line">    circleShapeLayer1.fillColor = fillCGColor</div><div class="line">    </div><div class="line">    circleShapeLayer1.frame = CGRect(x: marginLeft, y: 100, width: shapeWidth, height: shapeWidth)</div><div class="line">    view.layer.addSublayer(circleShapeLayer1)</div><div class="line">    </div><div class="line">    circleShapeLayer2.path = bezierCGPath</div><div class="line">    circleShapeLayer2.fillColor = fillCGColor</div><div class="line">    circleShapeLayer2.frame = CGRect(x: marginLeft + 30, y: 100, width: shapeWidth, height: shapeWidth)</div><div class="line">    view.layer.addSublayer(circleShapeLayer2)</div><div class="line">    </div><div class="line">    circleShapeLayer3.path = bezierCGPath</div><div class="line">    circleShapeLayer3.fillColor = fillCGColor</div><div class="line">    circleShapeLayer3.frame = CGRect(x: marginLeft + 60, y: 100, width: shapeWidth, height: shapeWidth)</div><div class="line">    view.layer.addSublayer(circleShapeLayer3)</div><div class="line">&#125;</div><div class="line"></div><div class="line">//开始动画</div><div class="line">@IBAction func startAnimationButtonClicked(sender: AnyObject) &#123;</div><div class="line">    addLayerAnimation(circleShapeLayer1,layerTagStr: &quot;1&quot;)</div><div class="line">&#125;</div><div class="line"></div><div class="line">/**</div><div class="line"> 添加图层动画</div><div class="line"> </div><div class="line"> :param: layer       图层</div><div class="line"> :param: layerTagStr 图层 Tag</div><div class="line"> */</div><div class="line">func addLayerAnimation(layer: CAShapeLayer,layerTagStr: String) &#123;</div><div class="line">    let scaleKeyframeAnimation = CAKeyframeAnimation(keyPath: &quot;transform&quot;)</div><div class="line">    </div><div class="line">    let t1 = CATransform3DMakeScale(1.0, 1.0, 0)</div><div class="line">    let t2 = CATransform3DMakeScale(1.5, 1.5, 0)</div><div class="line">    let t3 = CATransform3DMakeScale(1.0, 1.0, 0)</div><div class="line">    </div><div class="line">    scaleKeyframeAnimation.values = [NSValue(CATransform3D:t1),NSValue(CATransform3D:t2),NSValue(CATransform3D:t3)]</div><div class="line">    scaleKeyframeAnimation.keyTimes = [0, 0.5, 1]</div><div class="line">    </div><div class="line">    let normalCGColor = UIColor(red: 200/255.0, green: 200/255.0, blue: 200/255.0, alpha: 1.0).CGColor</div><div class="line">    let highlightedColor = UIColor(red: 60/255.0, green: 60/255.0, blue: 60/255.0, alpha: 1.0).CGColor</div><div class="line">    let colorKeyframeAnimation = CAKeyframeAnimation(keyPath: &quot;fillColor&quot;)</div><div class="line">    colorKeyframeAnimation.values = [normalCGColor,highlightedColor,normalCGColor]</div><div class="line">    colorKeyframeAnimation.keyTimes = [0, 0.5, 1]</div><div class="line">    </div><div class="line">    let groupAnimation = CAAnimationGroup()</div><div class="line">    groupAnimation.duration = CFTimeInterval(0.35)</div><div class="line">    groupAnimation.animations = [scaleKeyframeAnimation,colorKeyframeAnimation]</div><div class="line">    groupAnimation.removedOnCompletion = true</div><div class="line">    groupAnimation.setValue(layerTagStr, forKey: &quot;LayerTag&quot;)</div><div class="line">    groupAnimation.delegate = self</div><div class="line">    </div><div class="line">    layer.addAnimation(groupAnimation, forKey: &quot;scaleKeyframeAnimation&quot;)</div><div class="line">&#125;</div><div class="line"></div><div class="line">// 动画结束协议</div><div class="line">override func animationDidStop(anim: CAAnimation, finished flag: Bool) &#123;</div><div class="line">    let  layerTagStr = anim.valueForKey(&quot;LayerTag&quot;) as! String</div><div class="line">    </div><div class="line">    if layerTagStr == &quot;1&quot;&#123;</div><div class="line">        addLayerAnimation(circleShapeLayer2,layerTagStr: &quot;2&quot;)</div><div class="line">    &#125;else if layerTagStr == &quot;2&quot;&#123;</div><div class="line">        addLayerAnimation(circleShapeLayer3,layerTagStr: &quot;3&quot;)</div><div class="line">    &#125;else if layerTagStr == &quot;3&quot;&#123;</div><div class="line">        addLayerAnimation(circleShapeLayer1,layerTagStr: &quot;1&quot;)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>代码已传至GitHub：<a href="https://github.com/iYiming/YMRefreshView" target="_blank" rel="external">https://github.com/iYiming/YMRefreshView</a></p>
</div></article></div></section><footer><div class="paginator"><a href="/2016/06/05/2016-06-05-di-1-zhang-shou-xi-objective-c/" class="prev">上一篇</a><a href="/2016/05/08/2016-05-08-xie-yi-ge-jian-yi-shi-pin-bo-fang-qi/" class="next">下一篇</a></div><div data-thread-key="2016/05/22/2016-05-22-zi-ding-yi-xia-la-shua-xin/" data-title="仿写 RSS 阅读器 Unread 下拉刷新" data-url="http://iYiming.me/2016/05/22/2016-05-22-zi-ding-yi-xia-la-shua-xin/" data-author-key="1" class="ds-thread"></div><script>var duoshuoQuery = {short_name:"jiajiayouba"};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
})();

</script><div class="copyright"><p>© 2014 - 2016 <a href="http://iYiming.me">iYiming</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>