<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Swift 2.0 —— 字符串和字符 · 一鸣的博客</title><meta name="description" content="Swift 2.0 —— 字符串和字符 - iYiming"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.jpg"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://iYiming.me/atom.xml" title="一鸣的博客"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.jpg"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/jiajiayouba" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/iYiming" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">Swift 2.0 —— 字符串和字符</h1><div class="post-info">2015年11月3日</div><div class="post-content"><p><img src="/images/swift-zi-fu-chuan-he-zi-fu/0.jpg" alt="Swift 字符串和字符"></p>
<p>0.字符串字面量是由双引号 ( <code>&quot;&quot;</code> ) 包裹着的具有固定顺序的文本字符集。每一个字符串都是由编码无关的 Unicode 字符组成，并支持访问字符的多种 Unicode 表示形式（representations）。  </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> someString = <span class="string">"Some string literal value"</span></div></pre></td></tr></table></figure>
<p>1.要创建一个空字符串作为初始值，可以将空的字符串字面量赋值给变量，也可以初始化一个新的 <code>String</code> 实例：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> emptyString = <span class="string">""</span>               <span class="comment">// 空字符串字面量</span></div><div class="line"><span class="keyword">var</span> anotherEmptyString = <span class="type">String</span>()  <span class="comment">// 初始化方法</span></div><div class="line"><span class="comment">// 两个字符串均为空并等价。</span></div></pre></td></tr></table></figure>
<p>2.您可以通过检查其 <code>Boolean</code> 类型的 <code>isEmpty</code> 属性来判断该字符串是否为空：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> emptyString.isEmpty &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Nothing to see here"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// 打印输出："Nothing to see here"</span></div></pre></td></tr></table></figure>
<p>3.Swift 的 <code>String</code> 类型是<strong>值类型</strong>。 如果您创建了一个新的字符串，那么当其进行常量、变量赋值操作，或在函数/方法中传递时，会进行值拷贝。 任何情况下，都会对已有字符串值创建新副本，并对该新副本进行传递或赋值操作。</p>
<p>4.<code>String</code> 是例如 <code>&quot;hello, world&quot;</code> ，<code>&quot;albatross&quot;</code> 这样的有序的<code>Character</code> （字符）类型的值的集合。通过 <code>String</code> 类型来表示。 一个 <code>String</code> 的内容可以用变量的方式读取，它包括一个 <code>Character</code> 值的集合。</p>
<p>5.您可通过 for-in 循环来遍历字符串中的 characters 属性来获取每一个字符的值：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> character <span class="keyword">in</span> <span class="string">"Dog!🐶"</span>.characters &#123;</div><div class="line">    <span class="built_in">print</span>(character)</div><div class="line">&#125;</div><div class="line"><span class="comment">// D</span></div><div class="line"><span class="comment">// o</span></div><div class="line"><span class="comment">// g</span></div><div class="line"><span class="comment">// !</span></div><div class="line"><span class="comment">// 🐶</span></div></pre></td></tr></table></figure>
<p>6.创建一个字符</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> exclamationMark: <span class="type">Character</span> = <span class="string">"!"</span></div></pre></td></tr></table></figure>
<p>7.字符串可以通过传递一个值类型为 <code>Character</code> 的数组作为自变量来初始化：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> catCharacters: [<span class="type">Character</span>] = [<span class="string">"C"</span>, <span class="string">"a"</span>, <span class="string">"t"</span>, <span class="string">"!"</span>, <span class="string">"🐱"</span>]</div><div class="line"><span class="keyword">let</span> catString = <span class="type">String</span>(catCharacters)</div><div class="line"><span class="built_in">print</span>(catString)</div><div class="line"><span class="comment">// 打印输出："Cat!🐱"</span></div></pre></td></tr></table></figure>
<p>8.字符串可以通过加法运算符（ <code>+</code> ）相加在一起（或称“连接”）创建一个新的字符串：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> string1 = <span class="string">"hello"</span></div><div class="line"><span class="keyword">let</span> string2 = <span class="string">" there"</span></div><div class="line"><span class="keyword">var</span> welcome = string1 + string2</div><div class="line"><span class="comment">// welcome 现在等于 "hello there"</span></div></pre></td></tr></table></figure>
<p>9.您可以用 <code>append()</code> 方法<strong>一个字符</strong>附加到一个字符串变量的尾部：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> exclamationMark: <span class="type">Character</span> = <span class="string">"!"</span></div><div class="line">welcome.append(exclamationMark)</div><div class="line"><span class="comment">// welcome 现在等于 "hello there!"</span></div></pre></td></tr></table></figure>
<p>10.如果想要获得一个字符串中 <code>Character</code> 值的数量，可以使用字符串的<code>characters</code> 属性的 <code>count</code> 属性：  </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> unusualMenagerie = <span class="string">"Koala 🐨, Snail 🐌, Penguin 🐧, Dromedary 🐪"</span></div><div class="line"><span class="built_in">print</span>(<span class="string">"unusualMenagerie has <span class="subst">\(unusualMenagerie.characters.<span class="built_in">count</span>)</span> characters"</span>)</div><div class="line"><span class="comment">// 打印输出 "unusualMenagerie has 40 characters"</span></div></pre></td></tr></table></figure>
<p>另外需要注意的是通过 <code>characters</code> 属性返回的字符数量并不总是与包含相同字符的 <code>NSString</code> 的 <code>length</code> 属性相同。<code>NSString</code> 的 <code>length</code> 属性是利用 <code>UTF-16</code> 表示的十六位代码单元数字，而不是 <code>Unicode</code> 可扩展的字符群集。作为佐证，当一个 <code>NSString</code> 的 <code>length</code> 属性被一个 <code>Swift</code> 的 <code>String</code> 值访问时，实际上是调用了 <code>utf16Count</code>。</p>
<p>11.每一个 <code>String</code> 值都有一个关联的索引( <code>index</code> )类型，<code>String.Index</code>，它对应着字符串中的每一个 <code>Character</code> 的位置。  </p>
<p>12.不同的字符可能会占用不同数量的内存空间，所以要知道 Character 的确定位置，就必须从String 开头遍历每一个 Unicode 标量直到结尾。<strong>因此，Swift 的字符串不能用整数(integer)做索引（索引类型为实质是一个结构体，别名为Index）</strong>。</p>
<p>13.使用 <code>startIndex</code> 属性可以获取一个 <code>String</code> 的<strong>第一个Character的索引</strong>。使用 <code>endIndex</code> 属性可以获取最后一个 <code>Character</code> 的<strong>后一个位置的索引</strong>。因此，<code>endIndex</code> 属性不能作为一个字符串的有效下标。<strong>如果String是空字符串，<code>startIndex</code> 和 <code>endIndex</code> 是相等的</strong>。</p>
<p>14.通过调用 <code>String.Index</code> 的 <code>predecessor()</code> 方法，可以立即得到前面一个索引，调用 <code>successor()</code> 方法可以立即得到后面一个索引。任何一个 <code>String</code> 的索引都可以通过锁链作用的这些方法来获取另一个索引，也可以调用<code>advancedBy(_:)</code> 方法来获取。但如果尝试获取出界的字符串索引，就会抛出一个运行时错误。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> greeting = <span class="string">"Guten Tag!"</span></div><div class="line">greeting[greeting.startIndex]</div><div class="line"><span class="comment">// G</span></div><div class="line">greeting[greeting.endIndex.predecessor()]</div><div class="line"><span class="comment">// !</span></div><div class="line">greeting[greeting.startIndex.successor()]</div><div class="line"><span class="comment">// u</span></div><div class="line"><span class="keyword">let</span> index = greeting.startIndex.advancedBy(<span class="number">7</span>)</div><div class="line">greeting[index]</div><div class="line"><span class="comment">// a</span></div></pre></td></tr></table></figure>
<p>15.使用 <code>characters</code> 属性的 <code>indices</code> 属性会创建一个包含全部索引的范围( <code>Range</code> )，用来在一个字符串中访问单个字符。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> index <span class="keyword">in</span> greeting.characters.<span class="built_in">indices</span> &#123;</div><div class="line">   <span class="built_in">print</span>(<span class="string">"<span class="subst">\(greeting[index])</span> "</span>, terminator: <span class="string">" "</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// 打印输出 "G u t e n   T a g !"</span></div></pre></td></tr></table></figure>
<p>16.调用 <code>insert(_:atIndex:)</code> 方法可以在一个字符串的指定索引插入<strong>一个字符</strong>：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> welcome = <span class="string">"hello"</span></div><div class="line">welcome.insert(<span class="string">"!"</span>, atIndex: welcome.endIndex)</div><div class="line"><span class="comment">// welcome now 现在等于 "hello!"</span></div></pre></td></tr></table></figure>
<p>17.调用 <code>insertContentsOf(_:at:)</code> 方法可以在一个字符串的指定索引插入一个字符串。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">welcome.insertContentsOf(<span class="string">" there"</span>.characters, at: welcome.endIndex.predecessor())</div><div class="line"><span class="comment">// welcome 现在等于 "hello there!"</span></div></pre></td></tr></table></figure>
<p>18.调用 <code>removeAtIndex(_:)</code> 方法可以在一个字符串的指定索引删除<strong>一个字符</strong>。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">welcome.removeAtIndex(welcome.endIndex.predecessor())</div><div class="line"><span class="comment">// welcome 现在等于 "hello there"</span></div></pre></td></tr></table></figure>
<p>19.调用 <code>removeRange(_:)</code> 方法可以在一个字符串的指定索引删除一个子字符串。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> range = welcome.endIndex.advancedBy(-<span class="number">6</span>)..&lt;welcome.endIndex</div><div class="line">welcome.removeRange(range)</div><div class="line"><span class="comment">// welcome 现在等于 "hello"</span></div></pre></td></tr></table></figure>
<p>20.Swift 提供了三种方式来比较文本值：字符串字符相等、前缀相等和后缀相等。</p>
<p>21.字符串/字符可以用等于操作符( <code>==</code> )和不等于操作符( <code>!=</code> ):</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> quotation = <span class="string">"We're a lot alike, you and I."</span></div><div class="line"><span class="keyword">let</span> sameQuotation = <span class="string">"We're a lot alike, you and I."</span></div><div class="line"><span class="keyword">if</span> quotation == sameQuotation &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"These two strings are considered equal"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// 打印输出 "These two strings are considered equal"</span></div></pre></td></tr></table></figure>
<p>如果两个字符串（或者两个字符）的可扩展的字形群集是标准相等的，那就认为它们是相等的。在这个情况下，即使可扩展的字形群集是有不同的 <code>Unicode</code> 标量构成的，只要它们有同样的语言意义和外观，就认为它们标准相等。</p>
<p>22.通过调用字符串的 <code>hasPrefix(_:)/hasSuffix(_:)</code>方法来检查字符串是否拥有特定前缀/后缀，两个方法均接收一个String类型的参数，并返回一个布尔值。</p>
</div></article></div></section><footer><div class="paginator"><a href="/2015/11/04/2015-11-04-swift-ji-he-lei-xing/" class="prev">上一篇</a><a href="/2015/11/02/2015-11-02-swift-ji-ben-yun-suan-fu/" class="next">下一篇</a></div><div data-thread-key="2015/11/03/2015-11-03-swift-zi-fu-chuan-he-zi-fu/" data-title="Swift 2.0 —— 字符串和字符" data-url="http://iYiming.me/2015/11/03/2015-11-03-swift-zi-fu-chuan-he-zi-fu/" data-author-key="1" class="ds-thread"></div><script>var duoshuoQuery = {short_name:"jiajiayouba"};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
})();

</script><div class="copyright"><p>© 2014 - 2016 <a href="http://iYiming.me">iYiming</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1253468447'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s6.cnzz.com/z_stat.php%3Fid%3D1253468447%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script></body></html>